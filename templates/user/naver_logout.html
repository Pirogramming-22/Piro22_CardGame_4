<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로그아웃 중...</title>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const naverLogout = async () => {
                try {
                    const clientId = "{{ naver_client_id }}";
                    const clientSecret = "{{ naver_client_secret }}";
                    const accessToken = "{{ naver_access_token }}";

                    if (!accessToken) {
                        console.log("No access token available.");
                        window.location.href = "/users/main-prelogin/";
                        return;
                    }

                    const logoutUrl = `https://nid.naver.com/oauth2.0/token?grant_type=delete&client_id=${clientId}&client_secret=${clientSecret}&access_token=${accessToken}&service_provider=NAVER`;

                    // 네이버 로그아웃 요청
                    await fetch(logoutUrl, { mode: 'no-cors' });

                    console.log("네이버 로그아웃 성공!");

                    // 로컬 스토리지 초기화 (필요한 경우)
                    localStorage.removeItem('access');

                    // 메인 페이지로 리다이렉트
                    window.location.href = "/users/main-prelogin/";
                } catch (error) {
                    console.error("네이버 로그아웃 중 오류 발생:", error);
                    window.location.href = "/users/main-prelogin/";
                }
            };

            // 로그아웃 실행
            naverLogout();
        });
    </script>
</head>
<body>
    <p>로그아웃 중입니다. 잠시만 기다려 주세요...</p>
</body>
</html>
